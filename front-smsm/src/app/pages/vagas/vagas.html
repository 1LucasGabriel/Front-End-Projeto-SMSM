<main>
    <aside class="header">
        <h1 (click)="irPara(['/home'])">HealthFlow</h1>
    </aside>

    <div class="principal">
        <section class="menu">
            <div (click)="irPara(['/home'])">
                <i class="fa-solid fa-house"></i>
                <p>Home</p>
            </div>

            @if (usuario.idPerfil === 1 || usuario.idPerfil === 2) {
                <div (click)="irPara(['/triagem'])">
                    <i class="fa-solid fa-address-card"></i>
                    <p>Triagem</p>
                </div>
            }

            @if (usuario.idPerfil === 1) {
                <div (click)="irPara(['/dashboards'])">
                    <i class="fa-solid fa-chart-pie"></i>
                    <p>Dashboards</p>
                </div>
            }

            @if (usuario.idPerfil === 1 || usuario.idPerfil === 2) {
                <div (click)="irPara(['/solicitacoes'])">
                    <i class="fa-solid fa-envelope"></i>
                    <p>Solicitar</p>
                </div>
            }

            @if (usuario.idPerfil === 1) {
                <div (click)="irPara(['/lista-demandas'])">
                    <i class="fa-solid fa-list"></i>
                    <p>Demandas</p>
                </div>
            }


            @if (usuario.idPerfil === 1) {
                <div class="selecionado" (click)="irPara(['/vagas'])">
                    <i class="fa-solid fa-file"></i>
                    <p>Vagas</p>
                </div>
            }

            <div (click)="sair()">
                <i class="fa-solid fa-right-from-bracket"></i>
                <p>Sair</p>
            </div>
        </section>

        <section class="conteudo">
            <h3>Distribuição de Vagas</h3>

            <div class="principal">
                <article>
                    <h4>Fila de Espera</h4>

                    @for (item of demandas; track $index) {
                        @if (item.status == 'Pendente') {
                            <div class="card-paciente">
                                <label class="custom-checkbox">
                                    <input type="radio" name="demanda" [value]="item.id" [(ngModel)]="agendamento.idDemanda" />
                                    <span class="checkmark"></span>
                                </label>


                                <div class="info-demanda">
                                    <div class="cabecalho-demanda">
                                        <h5>{{item.pacienteNome}}</h5>
                                        <p>{{item.dataSolicitacao | date: 'dd/MM/yyyy HH:mm'}}</p>
                                    </div>

                                    <p>{{item.procedimentoNome}}</p>

                                    <p>Prioridade {{item.prioridade}}</p>
                                </div>
                            </div>
                        }
                    }
                </article>

                <article>
                    <h4>Vagas Disponíveis</h4>

                    @for (item of vagasUnidades; track $index) {
                        <div class="card-paciente">
                            <div class="info-demanda">
                                <div class="cabecalho-demanda">
                                    <h5>{{item.unidadeNome}}</h5>
                                    <p>{{item.mesAnoReferencia}}</p>
                                </div>

                                <p>{{item.quantidadeVagas}} vagas</p>
                            </div>
                        </div>
                    }
                </article>
            </div>

            <div class="filtro">
                <div>
                    <label>Alocar para:</label>
                    <select [(ngModel)]="agendamento.idVaga">
                        <option value="" disabled selected>Selecione um destino</option>
                        @for (item of vagasUnidades; track $index) {
                            <option [ngValue]="item.id">{{item.unidadeNome}}</option>
                        }
                    </select>
                </div>

                <div>
                    <label>Escolher data:</label>
                    <input type="datetime-local" [(ngModel)]="agendamento.dataRealizacao">
                </div>
            </div>

            <button (click)="enviarAgendamento()">Salvar Distribuição</button>
        </section>
    </div>
</main>
