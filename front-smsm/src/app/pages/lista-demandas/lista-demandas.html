<main>
    <aside class="header">
        <h1 (click)="irPara(['/home'])">HealthFlow</h1>
    </aside>

    <div class="principal">
        <section class="menu">
            <div (click)="irPara(['/home'])">
                <i class="fa-solid fa-house"></i>
                <p>Home</p>
            </div>

            @if (usuario.idPerfil === 1 || usuario.idPerfil === 2) {
                <div (click)="irPara(['/triagem'])">
                    <i class="fa-solid fa-address-card"></i>
                    <p>Triagem</p>
                </div>
            }

            @if (usuario.idPerfil === 1) {
                <div (click)="irPara(['/dashboards'])">
                    <i class="fa-solid fa-chart-pie"></i>
                    <p>Dashboards</p>
                </div>
            }

            @if (usuario.idPerfil === 1 || usuario.idPerfil === 2) {
                <div (click)="irPara(['/solicitacoes'])">
                    <i class="fa-solid fa-envelope"></i>
                    <p>Solicitar</p>
                </div>
            }

            @if (usuario.idPerfil === 1) {
                <div class="selecionado" (click)="irPara(['/lista-demandas'])">
                    <i class="fa-solid fa-list"></i>
                    <p>Demandas</p>
                </div>
            }


            @if (usuario.idPerfil === 1) {
                <div (click)="irPara(['/vagas'])">
                    <i class="fa-solid fa-file"></i>
                    <p>Vagas</p>
                </div>
            }

            <div (click)="sair()">
                <i class="fa-solid fa-right-from-bracket"></i>
                <p>Sair</p>
            </div>
        </section>

        <section class="conteudo">
            <h3>Lista de Demandas - {{ nomeUnidadeSelecionada }}</h3>

            <div class="busca">
                <div>
                    <label>Unidade</label>
                    <select [(ngModel)]="filtros.unidade" (change)="aplicarFiltros()">
                        <option value="" disabled selected>Selecione uma unidade</option>
                        @for (item of unidades; track $index) {
                            <option [ngValue]="item.id">{{item.nome}}</option>
                        }
                    </select>
                </div>

                <!-- <div>
                    <label>Procedimento</label>
                    <select [(ngModel)]="filtros.procedimento" (change)="aplicarFiltros()">
                        <option value="" disabled selected>Selecione um procedimento</option>
                        @for (item of procedimentos; track $index) {
                            <option [ngValue]="item.id">{{item.codigoProcedimento}} - {{item.nomeProcedimento}}</option>
                        }
                    </select>
                </div> -->

                <div>
                    <label>Prioridade</label>
                    <select [(ngModel)]="filtros.prioridade" (change)="aplicarFiltros()">
                        <option value="" disabled selected>Selecione uma prioridade</option>
                        <option [ngValue]="'Baixa'">Baixa</option>
                        <option [ngValue]="'Normal'">Normal</option>
                        <option [ngValue]="'Alta'">Alta</option>
                    </select>
                </div>

                <div>
                    <label>Status</label>
                    <select [(ngModel)]="filtros.status" (change)="aplicarFiltros()">
                        <option value="" disabled selected>Selecione um status</option>
                        <option [ngValue]="'Pendente'">Pendente</option>
                        <option [ngValue]="'Agendado'">Agendado</option>
                        <option [ngValue]="'Concluído'">Concluído</option>
                    </select>
                </div>
            </div>

            <table>
                <thead>
                    <tr>
                        <td>Paciente</td>
                        <td>Data de Solicitação</td>
                        <td>Prioridade</td>
                        <td>Status</td>
                    </tr>
                </thead>

                <tbody>
                    @for (item of demandasFiltradas; track $index) {
                        <tr>
                            <td>{{item.pacienteNome}}</td>
                            <td>{{item.dataSolicitacao | date:'dd/MM/yyyy HH:mm'}}</td>
                            <td>{{item.prioridade}}</td>
                            <td [ngStyle]="{'color': getStatusColor(item.status)}">{{item.status}}</td>
                        </tr>
                    }
                </tbody>
            </table>
        </section>
    </div>
</main>
