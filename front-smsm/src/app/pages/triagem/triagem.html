<main>
    <aside class="header">
        <h1 (click)="irPara(['/home'])">HealthFlow</h1>
    </aside>

    <div class="principal">
        <section class="menu">
            <div (click)="irPara(['/home'])">
                <i class="fa-solid fa-house"></i>
                <p>Home</p>
            </div>

            @if (usuario.idPerfil === 1 || usuario.idPerfil === 2) {
                <div class="selecionado" (click)="irPara(['/triagem'])">
                    <i class="fa-solid fa-address-card"></i>
                    <p>Triagem</p>
                </div>
            }

            @if (usuario.idPerfil === 1) {
                <div (click)="irPara(['/dashboards'])">
                    <i class="fa-solid fa-chart-pie"></i>
                    <p>Dashboards</p>
                </div>
            }

            @if (usuario.idPerfil === 1 || usuario.idPerfil === 2) {
                <div (click)="irPara(['/solicitacoes'])">
                    <i class="fa-solid fa-envelope"></i>
                    <p>Solicitar</p>
                </div>
            }

            @if (usuario.idPerfil === 1) {
                <div (click)="irPara(['/lista-demandas'])">
                    <i class="fa-solid fa-list"></i>
                    <p>Demandas</p>
                </div>
            }

            @if (usuario.idPerfil === 1) {
                <div (click)="irPara(['/vagas'])">
                    <i class="fa-solid fa-file"></i>
                    <p>Vagas</p>
                </div>
            }

            <div (click)="sair()">
                <i class="fa-solid fa-right-from-bracket"></i>
                <p>Sair</p>
            </div>
        </section>

        <section class="conteudo">
            <h3>Painel de Triagem - {{unidade.nome}}</h3>

            <div class="busca">
                <div class="search-bar">
                    <i class="fa-solid fa-magnifying-glass"></i>
                    <input type="text" placeholder="Pesquise por aqui..." (input)="filtrar($event)">
                </div>
            </div>

            <table>
                <thead>
                    <tr>
                        <td>Paciente</td>
                        <td>Horário</td>
                        <td>Procedimento</td>
                        <td>Status</td>
                        <td>Ações</td>
                    </tr>
                </thead>

                <tbody>
                    @for (item of agendamentosFiltrados; track $index) {
                        @if (item.statusComparecimento != "Concluído") {
                            <tr>
                                <td>{{item.pacienteNome}}</td>
                                <td>{{item.dataRealizacao | date: 'HH:mm'}}</td>
                                <td>{{item.procedimentoNome}}</td>
                                <td [ngStyle]="{'color': getStatusColor(item.statusComparecimento)}">{{item.statusComparecimento}}</td>
                                <td style="text-align: center;">
                                    <i class="fa-solid fa-bullhorn" [ngStyle]="{'color': getIconColor(item.statusComparecimento, 'chamar'), 'cursor': getIconCursor(item.statusComparecimento)}" (click)="chamarPacienteModal(item)" ></i>
                                    |
                                    <i class="fa-solid fa-x" [ngStyle]="{'color': getIconColor(item.statusComparecimento, 'cancelar'), 'cursor': getIconCursor(item.statusComparecimento)}" (click)="cancelarConsultaModal(item)"></i>
                                    |
                                    <i class="fa-solid fa-check" [ngStyle]="{'color': getIconColor(item.statusComparecimento, 'confirmar'), 'cursor': getIconCursor(item.statusComparecimento)}" (click)="concluirAgendamentoModal(item)"></i>
                                </td>
                            </tr>
                        }
                    }
                </tbody>
            </table>
        </section>
    </div>
</main>
